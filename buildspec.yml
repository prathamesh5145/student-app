version: 0.2

phases:
  install:
    commands:
      # Install OpenJDK 11 JDK
      - echo Installing OpenJDK 11...
      - apt-get update
      - apt-get install -y openjdk-11-jdk

      # Install Maven 3.3.1
      - echo Installing Maven 3.3.1...
      - curl -sL https://archive.apache.org/dist/maven/maven-3/3.3.1/binaries/apache-maven-3.3.1-bin.tar.gz | tar xz -C /opt
      - export MAVEN_HOME=/opt/apache-maven-3.3.1
      - export PATH=$MAVEN_HOME/bin:$PATH
      - echo "Maven version: $(mvn --version)"

  pre_build:
    commands:
      # Optional: Clean the previous build artifacts
      - echo Pre-build phase: Running Maven Clean
      - mvn clean

  build:
    commands:
      # Build the project and create the .war file
      - echo Building the project...
      - mvn package

  post_build:
    commands:
      - echo Build completed.
      # Optional: Perform post-build tasks here

artifacts:
  files:
    - target/*.war
  discard-paths: yes

